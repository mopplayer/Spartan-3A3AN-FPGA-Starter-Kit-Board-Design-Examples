EDK MicroBlaze Spartan-3A Starter Kit BPI Flash Programmer

Christophe Charpentier
7/13/2007

Requirements:
-------------
EDK 9.1.02
ISE 9.1.03


Hardware:
---------
Xilinx Spartan-3A Starter Kit board
USB Cable (provided with the Kit)


Implementation:
---------------
XPS is used to implement the system.


Preparing the bit file to be downloaded to Flash:
-------------------------------------------------
1) Open iMPACT

2) Double-click on "PROM File Formatter". Click Next 

3) Select "Xilinx PROM", "BIN" file format, and select the location directory. Click Next

4) Select "Auto Select PROM". Click Next. Click Finish

5) Select the bit file to program into Flash

6) Select "No" when asked to add another device file

7) Double-click on "Generate File..."

8) Close iMPACT

9) Copy the ".bin" file generated to the XPS project directory



Step by Step Instructions to program the Flash:
-----------------------------------------------
1) Open the system.xmp file with XPS

2) The system contains
	- MicroBlaze v6 running at 50MHz
	- LMB BRAM (32KB)
	- OPB EMC Controller for BPI Flash (4MB)
	- Hardware Debug Module

3) The Implementation is done by XPS
	- Go to Hardware > Generate Bitstream to generate a bit file

4) Configure the FPGA
	- Power on the Spartan-3A Starter Kit. Connect the USB cable
	- Go to Device Configuration > Download Bitstream

5) Go to Device Configuration > Program Flash Memory

6) Select the ".bin" file generated by iMPACT. Click OK

7) Look at the XPS Console Window to verify that the FLash programming completed successfully


MultiBoot note:
---------------
An offset can be added to the Flash address when programming the Flash memory
to place the FPGA configuration at a different address.






